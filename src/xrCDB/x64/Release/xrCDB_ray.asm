; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.21005.1 

include listing.inc

INCLUDELIB OLDNAMES

	ORG $+32
EPS	DD	03727c5acr			; 1e-005
PUBLIC	?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,0,0>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,0,1>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,1,0>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,1,1>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,0,0>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,0,1>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,1,0>::_tri
PUBLIC	?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,1,1>::_tri
PUBLIC	?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,0,0>::_tri
PUBLIC	?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,0,1>::_tri
PUBLIC	?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,1,0>::_tri
PUBLIC	?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,1,1>::_tri
PUBLIC	?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,0,0>::_tri
PUBLIC	?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,0,1>::_tri
PUBLIC	?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,1,0>::_tri
PUBLIC	?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,1,1>::_tri
PUBLIC	?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z ; ray_collider<0,0,0,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,0,0,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,0,0,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z	; ray_collider<0,0,0,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,0,0,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,0,0,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z	; ray_collider<0,0,1,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,0,1,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,0,1,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z	; ray_collider<0,0,1,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,0,1,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,0,1,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z	; ray_collider<0,1,0,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,1,0,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,1,0,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z	; ray_collider<0,1,0,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,1,0,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,1,0,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z	; ray_collider<0,1,1,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,1,1,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,1,1,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z	; ray_collider<0,1,1,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<0,1,1,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<0,1,1,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z	; ray_collider<1,0,0,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,0,0,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,0,0,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z	; ray_collider<1,0,0,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,0,0,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,0,0,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z	; ray_collider<1,0,1,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,0,1,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,0,1,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z	; ray_collider<1,0,1,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,0,1,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,0,1,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z	; ray_collider<1,1,0,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,1,0,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,1,0,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z	; ray_collider<1,1,0,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,1,0,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,1,0,1>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z	; ray_collider<1,1,1,0>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,1,1,0>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,1,1,0>::_box_fpu
PUBLIC	?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z	; ray_collider<1,1,1,1>::_prim
PUBLIC	?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ; ray_collider<1,1,1,1>::_box_sse
PUBLIC	?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ; ray_collider<1,1,1,1>::_box_fpu
PUBLIC	?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,0,0>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,0,0,0>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,0,1>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,0,0,1>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,1,0>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,0,1,0>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,1,1>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,0,1,1>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,0,0>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,1,0,0>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,0,1>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,1,0,1>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,1,0>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,1,1,0>::_init
PUBLIC	?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,1,1>::_stab
PUBLIC	?_init@?$ray_collider@$0A@$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<0,1,1,1>::_init
PUBLIC	?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,0,0>::_stab
PUBLIC	?_init@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,0,0,0>::_init
PUBLIC	?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,0,1>::_stab
PUBLIC	?_init@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,0,0,1>::_init
PUBLIC	?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,1,0>::_stab
PUBLIC	?_init@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,0,1,0>::_init
PUBLIC	?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,1,1>::_stab
PUBLIC	?_init@?$ray_collider@$00$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,0,1,1>::_init
PUBLIC	?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,0,0>::_stab
PUBLIC	?_init@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,1,0,0>::_init
PUBLIC	?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,0,1>::_stab
PUBLIC	?_init@?$ray_collider@$00$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,1,0,1>::_init
PUBLIC	?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,1,0>::_stab
PUBLIC	?_init@?$ray_collider@$00$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,1,1,0>::_init
PUBLIC	?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,1,1>::_stab
PUBLIC	?_init@?$ray_collider@$00$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ; ray_collider<1,1,1,1>::_init
PUBLIC	?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z ; CDB::COLLIDER::ray_query
flt_plus_inf DD	01H DUP (?)
ps_cst_plus_inf DD 04H DUP (?)
ps_cst_minus_inf DD 04H DUP (?)
_BSS	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+309
	DD	imagerel $LN45+581
	DD	imagerel $chain$0$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN45+581
	DD	imagerel $LN45+634
	DD	imagerel $chain$1$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z DD imagerel $LN44
	DD	imagerel $LN44+628
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z DD imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z DD imagerel $LN33+59
	DD	imagerel $LN33+254
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z DD imagerel $LN33+254
	DD	imagerel $LN33+262
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z DD imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z DD imagerel $LN34+59
	DD	imagerel $LN34+487
	DD	imagerel $chain$0$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z DD imagerel $LN34+487
	DD	imagerel $LN34+495
	DD	imagerel $chain$1$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD imagerel $LN6
	DD	imagerel $LN6+195
	DD	imagerel $unwind$?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD imagerel $LN276
	DD	imagerel $LN276+637
	DD	imagerel $unwind$?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN321
	DD	imagerel $LN321+870
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN321
	DD	imagerel $LN321+870
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN328
	DD	imagerel $LN328+925
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN328
	DD	imagerel $LN328+925
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN321
	DD	imagerel $LN321+870
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN321
	DD	imagerel $LN321+870
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN328
	DD	imagerel $LN328+925
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN328
	DD	imagerel $LN328+925
	DD	imagerel $unwind$?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN314
	DD	imagerel $LN314+532
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN314
	DD	imagerel $LN314+532
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+228
	DD	imagerel $LN322+563
	DD	imagerel $chain$0$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+563
	DD	imagerel $LN322+589
	DD	imagerel $chain$1$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+228
	DD	imagerel $LN322+563
	DD	imagerel $chain$0$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+563
	DD	imagerel $LN322+589
	DD	imagerel $chain$1$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN314
	DD	imagerel $LN314+532
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN314
	DD	imagerel $LN314+532
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+228
	DD	imagerel $LN322+563
	DD	imagerel $chain$0$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+563
	DD	imagerel $LN322+589
	DD	imagerel $chain$1$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$0$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+228
	DD	imagerel $LN322+563
	DD	imagerel $chain$0$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$1$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD imagerel $LN322+563
	DD	imagerel $LN322+589
	DD	imagerel $chain$1$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z DD imagerel $LN706
	DD	imagerel $LN706+1205
	DD	imagerel $unwind$?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$??__Eflt_plus_inf@@YAXXZ DD imagerel ??__Eflt_plus_inf@@YAXXZ
	DD	imagerel ??__Eflt_plus_inf@@YAXXZ+32
	DD	imagerel $unwind$??__Eflt_plus_inf@@YAXXZ
pdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$??__Eflt_plus_inf@@YAXXZ DD 010401H
	DD	04204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z DD 0a1f01H
	DD	015e41fH
	DD	014741fH
	DD	013641fH
	DD	012341fH
	DD	05015f21fH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 021H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 020521H
	DD	0b5405H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0a2101H
	DD	027821H
	DD	03681cH
	DD	0d640fH
	DD	0c340fH
	DD	0700b720fH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 021H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 020521H
	DD	0b5405H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0a2101H
	DD	027821H
	DD	03681cH
	DD	0d640fH
	DD	0c340fH
	DD	0700b720fH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0c2601H
	DD	027826H
	DD	036821H
	DD	0d6414H
	DD	0c5414H
	DD	0b3414H
	DD	070107214H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0c2601H
	DD	027826H
	DD	036821H
	DD	0d6414H
	DD	0c5414H
	DD	0b3414H
	DD	070107214H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 021H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 020521H
	DD	0b5405H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0a2101H
	DD	027821H
	DD	03681cH
	DD	0d640fH
	DD	0c340fH
	DD	0700b720fH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 021H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 020521H
	DD	0b5405H
	DD	imagerel $LN322
	DD	imagerel $LN322+228
	DD	imagerel $unwind$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0a2101H
	DD	027821H
	DD	03681cH
	DD	0d640fH
	DD	0c340fH
	DD	0700b720fH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0c2601H
	DD	027826H
	DD	036821H
	DD	0d6414H
	DD	0c5414H
	DD	0b3414H
	DD	070107214H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 0c2601H
	DD	027826H
	DD	036821H
	DD	0d6414H
	DD	0c5414H
	DD	0b3414H
	DD	070107214H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6d01H
	DD	04f86dH
	DD	05e867H
	DD	06d861H
	DD	07c85bH
	DD	08b856H
	DD	09a851H
	DD	0a984cH
	DD	0b8840H
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6d01H
	DD	04f86dH
	DD	05e867H
	DD	06d861H
	DD	07c85bH
	DD	08b856H
	DD	09a851H
	DD	0a984cH
	DD	0b8840H
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6801H
	DD	04f868H
	DD	05e862H
	DD	06d85cH
	DD	07c856H
	DD	08b851H
	DD	09a84cH
	DD	0a9847H
	DD	0b883bH
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6801H
	DD	04f868H
	DD	05e862H
	DD	06d85cH
	DD	07c856H
	DD	08b851H
	DD	09a84cH
	DD	0a9847H
	DD	0b883bH
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6d01H
	DD	04f86dH
	DD	05e867H
	DD	06d861H
	DD	07c85bH
	DD	08b856H
	DD	09a851H
	DD	0a984cH
	DD	0b8840H
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6d01H
	DD	04f86dH
	DD	05e867H
	DD	06d861H
	DD	07c85bH
	DD	08b856H
	DD	09a851H
	DD	0a984cH
	DD	0b8840H
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6801H
	DD	04f868H
	DD	05e862H
	DD	06d85cH
	DD	07c856H
	DD	08b851H
	DD	09a84cH
	DD	0a9847H
	DD	0b883bH
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z DD 01d6801H
	DD	04f868H
	DD	05e862H
	DD	06d85cH
	DD	07c856H
	DD	08b851H
	DD	09a84cH
	DD	0a9847H
	DD	0b883bH
	DD	0c7825H
	DD	0d681bH
	DD	0206417H
	DD	01f5417H
	DD	01e3417H
	DD	01c0117H
	DD	07010H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z DD 021H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN34
	DD	imagerel $LN34+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z DD 094a01H
	DD	01984aH
	DD	028822H
	DD	03781cH
	DD	046817H
	DD	0a204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z DD 031601H
	DD	06816H
	DD	02204H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z DD 021H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z DD 020521H
	DD	036805H
	DD	imagerel $LN33
	DD	imagerel $LN33+59
	DD	imagerel $unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z DD 040801H
	DD	070047208H
	DD	030026003H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 0176801H
	DD	0f868H
	DD	01e863H
	DD	02d84aH
	DD	03c840H
	DD	04b83bH
	DD	05a836H
	DD	069831H
	DD	078826H
	DD	087821H
	DD	096818H
	DD	014010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$1$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 021H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$chain$0$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 020521H
	DD	077805H
	DD	imagerel $LN45
	DD	imagerel $LN45+309
	DD	imagerel $unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z DD 0135d01H
	DD	0f85dH
	DD	01e851H
	DD	02d83cH
	DD	03c837H
	DD	04b832H
	DD	05a82dH
	DD	069822H
	DD	086818H
	DD	012010bH
	DD	03004H
flt_plus_inf$initializer$ DQ FLAT:??__Eflt_plus_inf@@YAXXZ
ps_cst_plus_inf$initializer$ DQ FLAT:??__Eps_cst_plus_inf@@YAXXZ
ps_cst_minus_inf$initializer$ DQ FLAT:??__Eps_cst_minus_inf@@YAXXZ
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ??__Eflt_plus_inf@@YAXXZ
text$di	SEGMENT
??__Eflt_plus_inf@@YAXXZ PROC				; `dynamic initializer for 'flt_plus_inf'', COMDAT

; 123  : static const float flt_plus_inf = -logf(0);	// let's keep C and C++ compilers happy.

	sub	rsp, 40					; 00000028H
	xorps	xmm0, xmm0
	call	logf
	xorps	xmm0, DWORD PTR __xmm@80000000800000008000000080000000
	movss	DWORD PTR flt_plus_inf, xmm0
	add	rsp, 40					; 00000028H
	ret	0
??__Eflt_plus_inf@@YAXXZ ENDP				; `dynamic initializer for 'flt_plus_inf''
text$di	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ??__Eps_cst_plus_inf@@YAXXZ
text$di	SEGMENT
??__Eps_cst_plus_inf@@YAXXZ PROC			; `dynamic initializer for 'ps_cst_plus_inf'', COMDAT

; 125  : 	ps_cst_plus_inf	[4]	=	{  flt_plus_inf,  flt_plus_inf,  flt_plus_inf,  flt_plus_inf },

	movss	xmm0, DWORD PTR flt_plus_inf
	shufps	xmm0, xmm0, 0
	movaps	XMMWORD PTR ps_cst_plus_inf, xmm0
	ret	0
??__Eps_cst_plus_inf@@YAXXZ ENDP			; `dynamic initializer for 'ps_cst_plus_inf''
text$di	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ??__Eps_cst_minus_inf@@YAXXZ
text$di	SEGMENT
??__Eps_cst_minus_inf@@YAXXZ PROC			; `dynamic initializer for 'ps_cst_minus_inf'', COMDAT

; 126  : 	ps_cst_minus_inf[4]	=	{ -flt_plus_inf, -flt_plus_inf, -flt_plus_inf, -flt_plus_inf };

	movss	xmm0, DWORD PTR flt_plus_inf
	xorps	xmm0, DWORD PTR __xmm@80000000800000008000000080000000
	shufps	xmm0, xmm0, 0
	movaps	XMMWORD PTR ps_cst_minus_inf, xmm0
	ret	0
??__Eps_cst_minus_inf@@YAXXZ ENDP			; `dynamic initializer for 'ps_cst_minus_inf''
text$di	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z
_TEXT	SEGMENT
RC$1 = 32
RC$2 = 32
RC$3 = 32
RC$4 = 32
RC$5 = 32
RC$6 = 32
RC$7 = 32
RC$8 = 32
RC$9 = 32
RC$10 = 32
RC$11 = 32
RC$12 = 32
this$ = 144
m_def$ = 152
r_start$ = 160
r_dir$ = 168
r_range$ = 176
?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z PROC ; CDB::COLLIDER::ray_query, COMDAT

; 359  : {

$LN706:
	mov	QWORD PTR [rsp+8], rbx
	mov	QWORD PTR [rsp+16], rsi
	mov	QWORD PTR [rsp+24], rdi
	mov	QWORD PTR [rsp+32], r14
	push	rbp
	mov	rbp, rsp
	sub	rsp, 128				; 00000080H
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 86   : 			if (S_READY!=status)

	cmp	DWORD PTR [rdx+16], 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 359  : {

	mov	rbx, r9
	mov	rdi, r8
	mov	rsi, rdx
	mov	r14, rcx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 86   : 			if (S_READY!=status)

	je	SHORT $LN33@ray_query

; 87   : 			{
; 88   : 				Log						("! WARNING: syncronized CDB::query");
; 89   : 				xrCriticalSection*	C	= (xrCriticalSection*) &cs;
; 90   : 				C->Enter				();

	mov	rcx, rdx
	call	QWORD PTR __imp_?Enter@xrCriticalSection@@QEAAXXZ

; 91   : 				C->Leave				();

	mov	rcx, rsi
	call	QWORD PTR __imp_?Leave@xrCriticalSection@@QEAAXXZ
$LN33@ray_query:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 150  : 		IMPLEMENT_COLLISION_TREE(AABBNoLeafTree, AABBNoLeafNode)

	mov	rax, QWORD PTR [rsi+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	xmm0, DWORD PTR [rdi]
	movss	xmm1, DWORD PTR [rdi+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR RC$12[rbp-128], r14
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 150  : 		IMPLEMENT_COLLISION_TREE(AABBNoLeafTree, AABBNoLeafNode)

	mov	r8, QWORD PTR [rax+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1510 : 		this->_Mylast = this->_Myfirst;

	mov	rax, QWORD PTR [r14+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	DWORD PTR RC$12[rbp-96], xmm0
	movss	xmm0, DWORD PTR [rdi+8]
	movss	DWORD PTR RC$12[rbp-92], xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 150  : 		IMPLEMENT_COLLISION_TREE(AABBNoLeafTree, AABBNoLeafNode)

	mov	rdx, QWORD PTR [r8+16]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1510 : 		this->_Mylast = this->_Myfirst;

	mov	QWORD PTR [r14+24], rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 367  : 	if (CPU::ID.feature&_CPU_FEATURE_SSE)	{

	mov	rax, QWORD PTR __imp_?ID@CPU@@3U_processor_info@@A
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	DWORD PTR RC$12[rbp-88], xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 367  : 	if (CPU::ID.feature&_CPU_FEATURE_SSE)	{

	test	BYTE PTR [rax+68], 2

; 368  : 		// SSE
; 369  : 		// Binary dispatcher
; 370  : 		if (ray_mode&OPT_CULL)		{

	mov	eax, DWORD PTR [r14]
	je	$LN30@ray_query
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm3, DWORD PTR __real@3f800000
	movss	xmm4, DWORD PTR [rbx]
	movss	xmm2, DWORD PTR [rbx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 375  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$12[rbp-128]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm3
	movaps	xmm1, xmm3
	divss	xmm0, xmm4
	divss	xmm1, xmm2

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	DWORD PTR RC$12[rbp-64], xmm4
	movss	DWORD PTR RC$12[rbp-60], xmm2

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR RC$12[rbp-80], xmm0
	movss	xmm0, DWORD PTR [rbx+8]
	movss	DWORD PTR RC$12[rbp-76], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	DWORD PTR RC$12[rbp-56], xmm0

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm3, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR r_range$[rbp-128]
	movss	DWORD PTR RC$12[rbp-48], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR RC$12[rbp-72], xmm3
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 198  : 		rRange2			= R*R;

	movss	DWORD PTR RC$12[rbp-44], xmm0

; 368  : 		// SSE
; 369  : 		// Binary dispatcher
; 370  : 		if (ray_mode&OPT_CULL)		{

	test	al, 1
	je	SHORT $LN29@ray_query

; 371  : 			if (ray_mode&OPT_ONLYFIRST)		{

	test	al, 2
	je	SHORT $LN28@ray_query

; 372  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$12[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$12[rbp-112], rax

; 372  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN27@ray_query

; 375  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,1,1>::_stab

; 376  : 				} else {

	jmp	$LN1@ray_query
$LN27@ray_query:

; 377  : 					ray_collider<true,true,true,false>		RC;
; 378  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 379  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,1,0>::_stab

; 380  : 				}
; 381  : 			} else {

	jmp	$LN1@ray_query
$LN28@ray_query:

; 382  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$11[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$11[rbp-112], rax

; 382  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN24@ray_query

; 383  : 					ray_collider<true,true,false,true>		RC;
; 384  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 385  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,0,1>::_stab

; 386  : 				} else {

	jmp	$LN1@ray_query
$LN24@ray_query:

; 387  : 					ray_collider<true,true,false,false>		RC;
; 388  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 389  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,0,0>::_stab

; 390  : 				}
; 391  : 			}
; 392  : 		} else {

	jmp	$LN1@ray_query
$LN29@ray_query:

; 393  : 			if (ray_mode&OPT_ONLYFIRST)		{

	test	al, 2
	je	SHORT $LN21@ray_query

; 394  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$10[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$10[rbp-112], rax

; 394  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN20@ray_query

; 395  : 					ray_collider<true,false,true,true>		RC;
; 396  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 397  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,1,1>::_stab

; 398  : 				} else {

	jmp	$LN1@ray_query
$LN20@ray_query:

; 399  : 					ray_collider<true,false,true,false>		RC;
; 400  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 401  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,1,0>::_stab

; 402  : 				}
; 403  : 			} else {

	jmp	$LN1@ray_query
$LN21@ray_query:

; 404  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$9[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$9[rbp-112], rax

; 404  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN17@ray_query

; 405  : 					ray_collider<true,false,false,true>		RC;
; 406  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 407  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,0,1>::_stab

; 408  : 				} else {

	jmp	$LN1@ray_query
$LN17@ray_query:

; 409  : 					ray_collider<true,false,false,false>	RC;
; 410  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 411  : 					RC._stab(N);

	call	?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,0,0>::_stab

; 412  : 				}
; 413  : 			}
; 414  : 		}
; 415  : 	} else {

	jmp	$LN1@ray_query
$LN30@ray_query:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm2, DWORD PTR __real@3f800000
	movss	xmm3, DWORD PTR [rbx]
	movss	xmm5, DWORD PTR [rbx+8]
	movaps	xmm0, xmm2
	movaps	xmm1, xmm2
	divss	xmm2, xmm5
	movss	xmm4, DWORD PTR [rbx+4]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	DWORD PTR RC$8[rbp-64], xmm3
	movss	DWORD PTR RC$8[rbp-56], xmm5

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, xmm3
	divss	xmm1, xmm4
	movss	DWORD PTR RC$8[rbp-72], xmm2
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	movss	DWORD PTR RC$8[rbp-60], xmm4

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR RC$8[rbp-80], xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR r_range$[rbp-128]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR RC$8[rbp-76], xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR RC$8[rbp-48], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR RC$8[rbp-44], xmm0
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm3
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 418  : 		if (ray_mode&OPT_CULL)		{

	test	al, 1
	je	$LN14@ray_query

; 419  : 			if (ray_mode&OPT_ONLYFIRST)		{

	test	al, 2
	je	$LN13@ray_query

; 420  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$8[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$8[rbp-112], rax

; 420  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN12@ray_query

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN425@ray_query
	mov	DWORD PTR RC$8[rbp-80], 0
$LN425@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN423@ray_query
	mov	DWORD PTR RC$8[rbp-76], 0
$LN423@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN421@ray_query
	mov	DWORD PTR RC$8[rbp-72], 0
$LN421@ray_query:

; 421  : 					ray_collider<false,true,true,true>		RC;
; 422  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 423  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$8[rbp-128]
	call	?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,1,1>::_stab

; 424  : 				} else {

	jmp	$LN1@ray_query
$LN12@ray_query:

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN460@ray_query
	mov	DWORD PTR RC$7[rbp-80], 0
$LN460@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN458@ray_query
	mov	DWORD PTR RC$7[rbp-76], 0
$LN458@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN456@ray_query
	mov	DWORD PTR RC$7[rbp-72], 0
$LN456@ray_query:

; 425  : 					ray_collider<false,true,true,false>		RC;
; 426  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 427  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$7[rbp-128]
	call	?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,1,0>::_stab

; 428  : 				}
; 429  : 			} else {

	jmp	$LN1@ray_query
$LN13@ray_query:

; 430  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$6[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$6[rbp-112], rax

; 430  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN9@ray_query

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN495@ray_query
	mov	DWORD PTR RC$6[rbp-80], 0
$LN495@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN493@ray_query
	mov	DWORD PTR RC$6[rbp-76], 0
$LN493@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN491@ray_query
	mov	DWORD PTR RC$6[rbp-72], 0
$LN491@ray_query:

; 431  : 					ray_collider<false,true,false,true>		RC;
; 432  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 433  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$6[rbp-128]
	call	?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,0,1>::_stab

; 434  : 				} else {

	jmp	$LN1@ray_query
$LN9@ray_query:

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN530@ray_query
	mov	DWORD PTR RC$5[rbp-80], 0
$LN530@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN528@ray_query
	mov	DWORD PTR RC$5[rbp-76], 0
$LN528@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN526@ray_query
	mov	DWORD PTR RC$5[rbp-72], 0
$LN526@ray_query:

; 435  : 					ray_collider<false,true,false,false>	RC;
; 436  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 437  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$5[rbp-128]
	call	?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,0,0>::_stab

; 438  : 				}
; 439  : 			}
; 440  : 		} else {

	jmp	$LN1@ray_query
$LN14@ray_query:

; 441  : 			if (ray_mode&OPT_ONLYFIRST)		{

	test	al, 2
	je	$LN6@ray_query

; 442  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$4[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$4[rbp-112], rax

; 442  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN5@ray_query

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN565@ray_query
	mov	DWORD PTR RC$4[rbp-80], 0
$LN565@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN563@ray_query
	mov	DWORD PTR RC$4[rbp-76], 0
$LN563@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN561@ray_query
	mov	DWORD PTR RC$4[rbp-72], 0
$LN561@ray_query:

; 443  : 					ray_collider<false,false,true,true>		RC;
; 444  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 445  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$4[rbp-128]
	call	?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,1,1>::_stab

; 446  : 				} else {

	jmp	$LN1@ray_query
$LN5@ray_query:

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN600@ray_query
	mov	DWORD PTR RC$3[rbp-80], 0
$LN600@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN598@ray_query
	mov	DWORD PTR RC$3[rbp-76], 0
$LN598@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN596@ray_query
	mov	DWORD PTR RC$3[rbp-72], 0
$LN596@ray_query:

; 447  : 					ray_collider<false,false,true,false>	RC;
; 448  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 449  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$3[rbp-128]
	call	?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,1,0>::_stab

; 450  : 				}
; 451  : 			} else {

	jmp	$LN1@ray_query
$LN6@ray_query:

; 452  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	test	al, 4

; 192  : 		tris			= T;

	mov	rax, QWORD PTR [rsi+24]
	mov	QWORD PTR RC$2[rbp-120], rax

; 193  : 		verts			= V;

	mov	rax, QWORD PTR [rsi+40]
	mov	QWORD PTR RC$2[rbp-112], rax

; 452  : 				if (ray_mode&OPT_ONLYNEAREST)		{

	je	SHORT $LN2@ray_query

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN635@ray_query
	mov	DWORD PTR RC$2[rbp-80], 0
$LN635@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN633@ray_query
	mov	DWORD PTR RC$2[rbp-76], 0
$LN633@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN631@ray_query
	mov	DWORD PTR RC$2[rbp-72], 0
$LN631@ray_query:

; 453  : 					ray_collider<false,false,false,true>	RC;
; 454  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 455  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$2[rbp-128]
	call	?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,0,1>::_stab

; 456  : 				} else {

	jmp	SHORT $LN1@ray_query
$LN2@ray_query:

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN670@ray_query
	mov	DWORD PTR RC$1[rbp-80], 0
$LN670@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm4
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN668@ray_query
	mov	DWORD PTR RC$1[rbp-76], 0
$LN668@ray_query:
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm5
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN666@ray_query
	mov	DWORD PTR RC$1[rbp-72], 0
$LN666@ray_query:

; 457  : 					ray_collider<false,false,false,false>	RC;
; 458  : 					RC._init(this,m_def->verts,m_def->tris,r_start,r_dir,r_range);
; 459  : 					RC._stab(N);

	lea	rcx, QWORD PTR RC$1[rbp-128]
	call	?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,0,0>::_stab
$LN1@ray_query:

; 460  : 				}
; 461  : 			}
; 462  : 		}
; 463  : 	}
; 464  : }

	lea	r11, QWORD PTR [rsp+128]
	mov	rbx, QWORD PTR [r11+16]
	mov	rsi, QWORD PTR [r11+24]
	mov	rdi, QWORD PTR [r11+32]
	mov	r14, QWORD PTR [r11+40]
	mov	rsp, r11
	pop	rbp
	ret	0
?ray_query@COLLIDER@CDB@@QEAAXPEBVMODEL@2@AEBU?$_vector3@M@@1M@Z ENDP ; CDB::COLLIDER::ray_query
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,1,1,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,1,1,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,1,1,1>::_stab, COMDAT

; 328  : 	{

$LN322:
	mov	QWORD PTR [rsp+24], rbx
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rdi, rdx
	mov	rbx, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
	xorps	xmm7, xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );

	movlhps	xmm5, xmm0

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	mov	QWORD PTR [rsp+88], rbp

; 230  : 
; 231  :         return 		isect_sse	(box,ray,dist);

	mov	rbp, 5270498306774157605		; 4924924924924925H
	npad	13
$LL310@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rbx+80]
	ja	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z ; ray_collider<1,1,1,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,1,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdi+4]
	movss	xmm1, DWORD PTR [rdi]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdi+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, edx
	mov	edx, 1
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdi+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdi+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdi+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rbx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rbx+32]
	mulps	xmm6, XMMWORD PTR [rbx+48]
	mulps	xmm5, XMMWORD PTR [rbx+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL310@stab
	jmp	SHORT $LN320@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z ; ray_collider<1,1,1,1>::_prim
$LN320@stab:
	mov	rbp, QWORD PTR [rsp+88]
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,1,1,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,1,1,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,1,1,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,1,1,0>::_stab, COMDAT

; 328  : 	{

$LN322:
	mov	QWORD PTR [rsp+24], rbx
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rdi, rdx
	mov	rbx, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
	xorps	xmm7, xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );

	movlhps	xmm5, xmm0

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	mov	QWORD PTR [rsp+88], rbp

; 230  : 
; 231  :         return 		isect_sse	(box,ray,dist);

	mov	rbp, 5270498306774157605		; 4924924924924925H
	npad	13
$LL310@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rbx+80]
	ja	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z ; ray_collider<1,1,1,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,1,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdi+4]
	movss	xmm1, DWORD PTR [rdi]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdi+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, edx
	mov	edx, 1
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdi+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdi+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdi+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rbx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rbx+32]
	mulps	xmm6, XMMWORD PTR [rbx+48]
	mulps	xmm5, XMMWORD PTR [rbx+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL310@stab
	jmp	SHORT $LN320@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z ; ray_collider<1,1,1,0>::_prim
$LN320@stab:
	mov	rbp, QWORD PTR [rsp+88]
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,1,1,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,1,0,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,1,0,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,1,0,1>::_stab, COMDAT

; 328  : 	{

$LN314:
	mov	QWORD PTR [rsp+16], rbx
	mov	QWORD PTR [rsp+24], rbp
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rbx, rdx
	mov	rdi, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ebp, 1
	xorps	xmm7, xmm7
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	npad	7
$LL304@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rdi+80]
	ja	$LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z ; ray_collider<1,1,0,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,0,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rbx, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rbx+4]
	movss	xmm1, DWORD PTR [rbx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rbx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rbx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rbx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rbx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rdi+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rdi+32]
	mulps	xmm6, XMMWORD PTR [rdi+48]
	mulps	xmm5, XMMWORD PTR [rdi+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL304@stab
	jmp	SHORT $LN1@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z ; ray_collider<1,1,0,1>::_prim
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+88]
	mov	rbp, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,1,0,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,1,0,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,1,0,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,1,0,0>::_stab, COMDAT

; 328  : 	{

$LN314:
	mov	QWORD PTR [rsp+16], rbx
	mov	QWORD PTR [rsp+24], rbp
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rbx, rdx
	mov	rdi, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ebp, 1
	xorps	xmm7, xmm7
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	npad	7
$LL304@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rdi+80]
	ja	$LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z ; ray_collider<1,1,0,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,1,0,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rbx, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rbx+4]
	movss	xmm1, DWORD PTR [rbx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rbx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rbx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rbx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rbx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rdi+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rdi+32]
	mulps	xmm6, XMMWORD PTR [rdi+48]
	mulps	xmm5, XMMWORD PTR [rdi+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL304@stab
	jmp	SHORT $LN1@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z ; ray_collider<1,1,0,0>::_prim
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+88]
	mov	rbp, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,1,0,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,0,1,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,0,1,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,0,1,1>::_stab, COMDAT

; 328  : 	{

$LN322:
	mov	QWORD PTR [rsp+24], rbx
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rdi, rdx
	mov	rbx, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
	xorps	xmm7, xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );

	movlhps	xmm5, xmm0

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	mov	QWORD PTR [rsp+88], rbp

; 230  : 
; 231  :         return 		isect_sse	(box,ray,dist);

	mov	rbp, 5270498306774157605		; 4924924924924925H
	npad	13
$LL310@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rbx+80]
	ja	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z ; ray_collider<1,0,1,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,1,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdi+4]
	movss	xmm1, DWORD PTR [rdi]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdi+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, edx
	mov	edx, 1
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdi+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdi+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdi+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rbx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rbx+32]
	mulps	xmm6, XMMWORD PTR [rbx+48]
	mulps	xmm5, XMMWORD PTR [rbx+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL310@stab
	jmp	SHORT $LN320@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z ; ray_collider<1,0,1,1>::_prim
$LN320@stab:
	mov	rbp, QWORD PTR [rsp+88]
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,0,1,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,0,1,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,0,1,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,0,1,0>::_stab, COMDAT

; 328  : 	{

$LN322:
	mov	QWORD PTR [rsp+24], rbx
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rdi, rdx
	mov	rbx, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
	xorps	xmm7, xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );

	movlhps	xmm5, xmm0

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	mov	QWORD PTR [rsp+88], rbp

; 230  : 
; 231  :         return 		isect_sse	(box,ray,dist);

	mov	rbp, 5270498306774157605		; 4924924924924925H
	npad	13
$LL310@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rbx+80]
	ja	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z ; ray_collider<1,0,1,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,1,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	$LN320@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdi+4]
	movss	xmm1, DWORD PTR [rdi]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdi+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, edx
	mov	edx, 1
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdi+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdi+16]

; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdi+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rbx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rbx+32]
	mulps	xmm6, XMMWORD PTR [rbx+48]
	mulps	xmm5, XMMWORD PTR [rbx+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, edx
	comiss	xmm4, xmm6
	cmovae	eax, edx
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL310@stab
	jmp	SHORT $LN320@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z ; ray_collider<1,0,1,0>::_prim
$LN320@stab:
	mov	rbp, QWORD PTR [rsp+88]
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,0,1,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,0,0,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,0,0,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,0,0,1>::_stab, COMDAT

; 328  : 	{

$LN314:
	mov	QWORD PTR [rsp+16], rbx
	mov	QWORD PTR [rsp+24], rbp
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rbx, rdx
	mov	rdi, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ebp, 1
	xorps	xmm7, xmm7
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	npad	7
$LL304@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rdi+80]
	ja	$LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z ; ray_collider<1,0,0,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,0,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rbx, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rbx+4]
	movss	xmm1, DWORD PTR [rbx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rbx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rbx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rbx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rbx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rdi+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rdi+32]
	mulps	xmm6, XMMWORD PTR [rdi+48]
	mulps	xmm5, XMMWORD PTR [rdi+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL304@stab
	jmp	SHORT $LN1@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z ; ray_collider<1,0,0,1>::_prim
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+88]
	mov	rbp, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,0,0,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<1,0,0,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 191  : 		dest			= CL;

	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 190  : 	{

	mov	r10, rcx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rcx, QWORD PTR D$[rsp]
	divss	xmm0, DWORD PTR [rcx]
	movss	DWORD PTR [r10+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rcx+4]
	movss	DWORD PTR [r10+52], xmm0
	divss	xmm1, DWORD PTR [rcx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [r10+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rcx]
	mov	DWORD PTR [r10+64], eax
	mov	eax, DWORD PTR [rcx+4]
	mov	DWORD PTR [r10+68], eax
	mov	eax, DWORD PTR [rcx+8]
	mov	DWORD PTR [r10+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	DWORD PTR [r10+80], xmm0

; 198  : 		rRange2			= R*R;

	mulss	xmm0, xmm0
	movss	DWORD PTR [r10+84], xmm0

; 199  : 		if (!bUseSSE)	{
; 200  : 			// for FPU - zero out inf
; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;
; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;
; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;
; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<1,0,0,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
d$1 = 80
this$ = 80
node$ = 88
?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<1,0,0,0>::_stab, COMDAT

; 328  : 	{

$LN314:
	mov	QWORD PTR [rsp+16], rbx
	mov	QWORD PTR [rsp+24], rbp
	mov	QWORD PTR [rsp+32], rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rdx+32]
	movaps	XMMWORD PTR [rsp+48], xmm6
	movaps	XMMWORD PTR [rsp+32], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 328  : 	{

	mov	rbx, rdx
	mov	rdi, rcx

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rdx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ebp, 1
	xorps	xmm7, xmm7
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rdx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rdx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rdx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm0, xmm4
	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	je	$LN1@stab
	npad	7
$LL304@stab:

; 337  : 			if (d>rRange)																	return;

	movss	xmm0, DWORD PTR d$1[rsp]
	comiss	xmm0, DWORD PTR [rdi+80]
	ja	$LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z ; ray_collider<1,0,0,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<1,0,0,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rsi], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	$LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rbx, QWORD PTR [rsi]
	mov	rax, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	lea	rsi, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	prefetchnta BYTE PTR [rax]

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rbx+4]
	movss	xmm1, DWORD PTR [rbx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [rbx+12]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, 0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	unpcklps xmm1, xmm0

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movss	xmm0, DWORD PTR [rbx+8]
	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [rbx+16]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [rbx+20]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rdi+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rdi+32]
	mulps	xmm6, XMMWORD PTR [rdi+48]
	mulps	xmm5, XMMWORD PTR [rdi+48]

; 139  : 
; 140  : 	// the order we use for those min/max is vital to filter out
; 141  : 	// NaNs that happens when an inv_dir is +/- inf and
; 142  : 	// (box_min - pos) is 0. inf * 0 = NaN
; 143  : 	const __m128 filtered_l1a = minps(l1, plus_inf);

	movaps	xmm4, xmm6

; 144  : 	const __m128 filtered_l2a = minps(l2, plus_inf);
; 145  : 
; 146  : 	const __m128 filtered_l1b = maxps(l1, minus_inf);

	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf

; 147  : 	const __m128 filtered_l2b = maxps(l2, minus_inf);

	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf

; 148  : 
; 149  : 	// now that we're back on our feet, test those slabs.
; 150  : 	__m128 lmax = maxps(filtered_l1a, filtered_l2a);

	maxps	xmm4, xmm0

; 151  : 	__m128 lmin = minps(filtered_l1b, filtered_l2b);

	minps	xmm6, xmm5

; 152  : 
; 153  : 	// unfold back. try to hide the latency of the shufps & co.
; 154  : 	const __m128 lmax0 = rotatelps(lmax);

	movaps	xmm0, xmm4

; 155  : 	const __m128 lmin0 = rotatelps(lmin);

	movaps	xmm1, xmm6
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H

; 156  : 	lmax = minss(lmax, lmax0);

	minss	xmm4, xmm0

; 157  : 	lmin = maxss(lmin, lmin0);

	maxss	xmm6, xmm1

; 158  : 
; 159  : 	const __m128 lmax1 = muxhps(lmax,lmax);

	movhlps	xmm0, xmm4

; 160  : 	const __m128 lmin1 = muxhps(lmin,lmin);

	movhlps	xmm1, xmm6

; 161  : 	lmax = minss(lmax, lmax1);

	minss	xmm4, xmm0

; 162  : 	lmin = maxss(lmin, lmin1);

	maxss	xmm6, xmm1

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	comiss	xmm4, xmm7

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR d$1[rsp], xmm6
	cmovae	ecx, ebp
	comiss	xmm4, xmm6
	cmovae	eax, ebp
	test	ecx, eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 336  : 			if (!_box_sse((Fvector&)node->mAABB.mCenter,(Fvector&)node->mAABB.mExtents,d))	return;

	jne	$LL304@stab
	jmp	SHORT $LN1@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rdi
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z ; ray_collider<1,0,0,0>::_prim
$LN1@stab:

; 355  : 	}

	mov	rbx, QWORD PTR [rsp+88]
	mov	rbp, QWORD PTR [rsp+96]
	mov	rsi, QWORD PTR [rsp+104]
	movaps	xmm6, XMMWORD PTR [rsp+48]
	movaps	xmm7, XMMWORD PTR [rsp+32]
	add	rsp, 64					; 00000040H
	pop	rdi
	ret	0
?_stab@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<1,0,0,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,1,1,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$00$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,1,1,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,1,1,1>::_stab, COMDAT

; 328  : 	{

$LN328:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	rbp, 5270498306774157605		; 4924924924924925H
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN326@stab:

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	mov	r8d, 2
	lea	edx, QWORD PTR [r8-1]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN321@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN321@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN322@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN322@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN323@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, r8d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN325@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN324@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN323@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN319@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, 1
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN325@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
$LN324@stab:
	ja	$LN1@stab
$LN319@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z ; ray_collider<0,1,1,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,1,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN326@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z ; ray_collider<0,1,1,1>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$00$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,1,1,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,1,1,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,1,1,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,1,1,0>::_stab, COMDAT

; 328  : 	{

$LN328:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	rbp, 5270498306774157605		; 4924924924924925H
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN326@stab:

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	mov	r8d, 2
	lea	edx, QWORD PTR [r8-1]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN321@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN321@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN322@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN322@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN323@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, r8d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN325@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN324@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN323@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN319@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, 1
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN325@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
$LN324@stab:
	ja	$LN1@stab
$LN319@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z ; ray_collider<0,1,1,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,1,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN326@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z ; ray_collider<0,1,1,0>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$00$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,1,1,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,1,0,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,1,0,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,1,0,1>::_stab, COMDAT

; 328  : 	{

$LN321:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	ebp, 1
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN319@stab:
	mov	edx, 2

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN314@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN314@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN315@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN315@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN316@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN318@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN317@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN316@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN312@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, ebp
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN318@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	SHORT $LN1@stab
	comiss	xmm7, xmm10
$LN317@stab:
	ja	SHORT $LN1@stab
$LN312@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z ; ray_collider<0,1,0,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,0,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN319@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z ; ray_collider<0,1,0,1>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$00$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,1,0,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,1,0,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,1,0,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,1,0,0>::_stab, COMDAT

; 328  : 	{

$LN321:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	ebp, 1
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN319@stab:
	mov	edx, 2

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN314@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN314@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN315@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN315@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN316@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN318@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN317@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN316@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN312@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, ebp
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN318@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	SHORT $LN1@stab
	comiss	xmm7, xmm10
$LN317@stab:
	ja	SHORT $LN1@stab
$LN312@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z ; ray_collider<0,1,0,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,1,0,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN319@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z ; ray_collider<0,1,0,0>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,1,0,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,0,1,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,0,1,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,0,1,1>::_stab, COMDAT

; 328  : 	{

$LN328:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	rbp, 5270498306774157605		; 4924924924924925H
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN326@stab:

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	mov	r8d, 2
	lea	edx, QWORD PTR [r8-1]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN321@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN321@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN322@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN322@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN323@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, r8d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN325@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN324@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN323@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN319@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, 1
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN325@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
$LN324@stab:
	ja	$LN1@stab
$LN319@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z ; ray_collider<0,0,1,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,1,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN326@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z ; ray_collider<0,0,1,1>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$0A@$00$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,0,1,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,0,1,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,0,1,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,0,1,0>::_stab, COMDAT

; 328  : 	{

$LN328:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	rbp, 5270498306774157605		; 4924924924924925H
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN326@stab:

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	mov	r8d, 2
	lea	edx, QWORD PTR [r8-1]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN321@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN321@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN322@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN322@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN323@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, r8d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN325@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN324@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN323@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN319@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, 1
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN325@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
$LN324@stab:
	ja	$LN1@stab
$LN319@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z ; ray_collider<0,0,1,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,1,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	rax, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rcx, QWORD PTR [rax+24]
	sub	rcx, QWORD PTR [rax+16]
	mov	rax, rbp
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 350  : 		if (bFirst && dest->r_count())														return;

	test	edx, edx
	jne	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN316@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN326@stab
$LN316@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z ; ray_collider<0,0,1,0>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,0,1,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,0,0,1>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,0,0,1>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,0,0,1>::_stab, COMDAT

; 328  : 	{

$LN321:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	ebp, 1
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN319@stab:
	mov	edx, 2

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN314@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN314@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN315@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN315@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN316@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN318@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN317@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN316@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN312@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, ebp
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN318@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	SHORT $LN1@stab
	comiss	xmm7, xmm10
$LN317@stab:
	ja	SHORT $LN1@stab
$LN312@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z ; ray_collider<0,0,0,1>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,0,1>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN319@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z ; ray_collider<0,0,0,1>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,0,0,1>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_init@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z
_TEXT	SEGMENT
this$ = 8
CL$ = 16
V$ = 24
T$ = 32
C$ = 40
D$ = 48
R$ = 56
?_init@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z PROC ; ray_collider<0,0,0,0>::_init, COMDAT
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	xmm1, DWORD PTR __real@3f800000
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	movsdx	xmm2, QWORD PTR __xmm@7fffffffffffffff7fffffffffffffff
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	movss	xmm3, DWORD PTR __real@34000000
	mov	QWORD PTR [rcx], rdx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	rdx, QWORD PTR C$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 192  : 		tris			= T;

	mov	QWORD PTR [rcx+8], r9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movaps	xmm0, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 193  : 		verts			= V;

	mov	QWORD PTR [rcx+16], r8
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+32], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+36], eax
	mov	eax, DWORD PTR [rdx+8]

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	mov	rdx, QWORD PTR D$[rsp]

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	DWORD PTR [rcx+40], eax

; 24   :     ICF SelfRef set(T _x, T _y, T _z) { x = _x; y = _y; z = _z; return *this; };

	mov	DWORD PTR [rcx+48], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+52], 1065353216		; 3f800000H
	mov	DWORD PTR [rcx+56], 1065353216		; 3f800000H

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	divss	xmm0, DWORD PTR [rdx]
	movss	DWORD PTR [rcx+48], xmm0
	movaps	xmm0, xmm1
	divss	xmm0, DWORD PTR [rdx+4]
	movss	DWORD PTR [rcx+52], xmm0
	divss	xmm1, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 197  : 		rRange			= R;

	movss	xmm0, DWORD PTR R$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 45   :     ICF SelfRef div(const Self& v) { x /= v.x; y /= v.y; z /= v.z; return *this; };

	movss	DWORD PTR [rcx+56], xmm1

; 25   :     ICF SelfRef set(const _vector3<float>& v) { x = T(v.x); y = T(v.y); z = T(v.z); return *this; };

	mov	eax, DWORD PTR [rdx]
	mov	DWORD PTR [rcx+64], eax
	mov	eax, DWORD PTR [rdx+4]
	mov	DWORD PTR [rcx+68], eax
	mov	eax, DWORD PTR [rdx+8]
	mov	DWORD PTR [rcx+72], eax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	xor	eax, eax
	movss	DWORD PTR [rcx+80], xmm0
	mulss	xmm0, xmm0
	movss	DWORD PTR [rcx+84], xmm0
	movss	xmm0, DWORD PTR [rdx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm1, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 201  : 			if (_abs(D.x)>flt_eps){}	else ray.inv_dir.x=0;

	comiss	xmm1, xmm3
	ja	SHORT $LN5@init
	mov	DWORD PTR [rcx+48], eax
$LN5@init:
	movss	xmm0, DWORD PTR [rdx+4]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 202  : 			if (_abs(D.y)>flt_eps){}	else ray.inv_dir.y=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN3@init
	mov	DWORD PTR [rcx+52], eax
$LN3@init:
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\math.h

; 687  :     return (float)fabs(_X);

	cvtps2pd xmm0, xmm0
	andps	xmm0, xmm2
	cvtpd2ps xmm0, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 203  : 			if (_abs(D.z)>flt_eps){}	else ray.inv_dir.z=0;

	comiss	xmm0, xmm3
	ja	SHORT $LN1@init
	mov	DWORD PTR [rcx+56], eax
$LN1@init:

; 204  : 		}
; 205  : 	}

	ret	0
?_init@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEAVCOLLIDER@CDB@@PEAU?$_vector3@M@@PEAVTRI@3@AEBU4@3M@Z ENDP ; ray_collider<0,0,0,0>::_init
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z
_TEXT	SEGMENT
MaxT$1 = 32
P$2 = 48
this$ = 240
node$ = 248
?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z PROC ; ray_collider<0,0,0,0>::_stab, COMDAT

; 328  : 	{

$LN321:
	mov	rax, rsp
	mov	QWORD PTR [rax+8], rbx
	mov	QWORD PTR [rax+16], rbp
	mov	QWORD PTR [rax+24], rsi
	push	rdi
	sub	rsp, 224				; 000000e0H
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR P$2[rsp+8]
	movaps	XMMWORD PTR [rax-40], xmm7
	movss	xmm7, DWORD PTR P$2[rsp+4]
	mov	rdi, rdx
	mov	rbx, rcx
	mov	ebp, 1
	movaps	XMMWORD PTR [rax-56], xmm8
	movss	xmm8, DWORD PTR P$2[rsp]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12
	movaps	XMMWORD PTR [rsp+96], xmm13
	movaps	XMMWORD PTR [rsp+80], xmm14
	movaps	XMMWORD PTR [rsp+64], xmm15
	movss	xmm15, DWORD PTR __real@bf800000
$LN319@stab:
	mov	edx, 2

; 329  : 		// Should help
; 330  : 		_mm_prefetch( (char *) node->GetNeg() , _MM_HINT_NTA );

	mov	rax, QWORD PTR [rdi+32]
	prefetchnta BYTE PTR [rax]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rdi]
	movss	xmm10, DWORD PTR [rdi+4]
	movss	xmm9, DWORD PTR [rdi+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm15
	movaps	xmm1, xmm15
	movaps	xmm0, xmm15

; 36   : 	BOOL Inside			= TRUE;

	mov	eax, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movaps	xmm14, xmm5
	movaps	xmm11, xmm10
	movaps	xmm13, xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm12, DWORD PTR [rbx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, DWORD PTR [rdi+12]
	addss	xmm10, DWORD PTR [rdi+16]

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm14, DWORD PTR [rdi+12]
	subss	xmm11, DWORD PTR [rdi+16]
	subss	xmm13, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm14, xmm12
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm9, DWORD PTR [rdi+20]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	DWORD PTR MaxT$1[rsp+8], xmm2
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
	movss	DWORD PTR MaxT$1[rsp], xmm0

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN59@stab

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm14

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm14

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN314@stab
$LN59@stab:
	comiss	xmm12, xmm5
	jbe	SHORT $LN55@stab

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm8, xmm5

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+48], eax
	je	SHORT $LN55@stab
	movaps	xmm0, xmm5
$LN314@stab:
	subss	xmm0, xmm12
	mulss	xmm0, DWORD PTR [rbx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN55@stab:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm4, DWORD PTR [rbx+36]
	comiss	xmm11, xmm4
	jbe	SHORT $LN54@stab

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm11

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm11

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN315@stab
$LN54@stab:
	comiss	xmm4, xmm10
	jbe	SHORT $LN50@stab

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movaps	xmm7, xmm10

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+52], eax
	je	SHORT $LN50@stab
	movaps	xmm1, xmm10
$LN315@stab:
	subss	xmm1, xmm4
	mulss	xmm1, DWORD PTR [rbx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm1
$LN50@stab:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm3, DWORD PTR [rbx+40]
	comiss	xmm13, xmm3
	jbe	$LN49@stab

; 58   : 		coord[2]	= min[2];
; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm13
	je	SHORT $LN44@stab
	movaps	xmm2, xmm13
$LN316@stab:

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	subss	xmm2, xmm3
	mulss	xmm2, DWORD PTR [rbx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm2
$LN44@stab:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	ecx, ecx
	comiss	xmm1, xmm0
	cmova	ecx, ebp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm2, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	ecx, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN1@stab

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	ecx, ecx
	jne	$LN40@stab

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm7, xmm0
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	$LN1@stab
	comiss	xmm7, xmm10
	ja	$LN1@stab

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	movaps	xmm6, xmm0
$LN318@stab:
	mulss	xmm6, DWORD PTR [rbx+72]
	addss	xmm6, xmm3

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm13, xmm6
	ja	$LN1@stab
	comiss	xmm6, xmm9

; 86   : 		return true;

	jmp	$LN317@stab
$LN49@stab:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm3, xmm9
	jbe	SHORT $LN45@stab

; 62   : 		coord[2]	= max[2];
; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rbx+56], 0
	movaps	xmm6, xmm9
	je	SHORT $LN44@stab
	movaps	xmm2, xmm9

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN316@stab
$LN45@stab:
	test	eax, eax
	je	$LN44@stab

; 69   : 		coord		= ray.pos;

	mov	eax, DWORD PTR [rbx+40]
	movsdx	xmm0, QWORD PTR [rbx+32]
	movsdx	QWORD PTR P$2[rsp], xmm0

; 70   : 		return		true;

	movss	xmm7, DWORD PTR P$2[rsp+4]
	movss	xmm8, DWORD PTR P$2[rsp]
	mov	DWORD PTR P$2[rsp+8], eax
	movss	xmm6, DWORD PTR P$2[rsp+8]
	jmp	SHORT $LN312@stab
$LN40@stab:

; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	ecx, ebp
	jne	SHORT $LN35@stab

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm8, xmm1
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	movaps	xmm6, xmm1

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;
; 93   : 		return true;

	jmp	$LN318@stab
$LN35@stab:

; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	ecx, 2
	jne	$LN1@stab

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm8, xmm2
	mulss	xmm8, DWORD PTR [rbx+64]
	addss	xmm8, xmm12

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm14, xmm8
	ja	$LN1@stab
	comiss	xmm8, xmm5
	ja	$LN1@stab

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	movaps	xmm7, xmm2
	mulss	xmm7, DWORD PTR [rbx+68]
	addss	xmm7, xmm4

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm11, xmm7
	ja	SHORT $LN1@stab
	comiss	xmm7, xmm10
$LN317@stab:
	ja	SHORT $LN1@stab
$LN312@stab:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 301  :         return (x - v.x)*(x - v.x) + (y - v.y)*(y - v.y) + (z - v.z)*(z - v.z);

	movaps	xmm1, xmm7
	movaps	xmm2, xmm8
	movaps	xmm0, xmm6
	subss	xmm2, xmm12
	subss	xmm1, xmm4
	subss	xmm0, xmm3
	mulss	xmm2, xmm2
	mulss	xmm1, xmm1
	mulss	xmm0, xmm0
	addss	xmm2, xmm1
	addss	xmm2, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 342  : 			if (P.distance_to_sqr(ray.pos)>rRange2)											return;

	comiss	xmm2, DWORD PTR [rbx+84]
	ja	SHORT $LN1@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+24]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	dl, bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	je	SHORT $LN5@stab
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 346  : 		if (node->HasLeaf())	_prim	(node->GetPrimitive());

	call	?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z ; ray_collider<0,0,0,0>::_prim

; 347  : 		else					_stab	(node->GetPos());

	jmp	SHORT $LN4@stab
$LN5@stab:
	call	?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ; ray_collider<0,0,0,0>::_stab
$LN4@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	test	BYTE PTR [rdi+32], bpl
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	jne	SHORT $LN309@stab

; 354  : 		else					_stab	(node->GetNeg());

	mov	rdi, QWORD PTR [rdi+32]
	jmp	$LN319@stab
$LN309@stab:
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	mov	rdx, QWORD PTR [rdi+32]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	mov	rcx, rbx
; File c:\x-ray\stcop\rgs\src\xrcdb\opc_optimizedtree.h

; 104  : 		IMPLEMENT_NOLEAF_NODE(AABBNoLeafNode, CollisionAABB)

	shr	rdx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 353  : 		if (node->HasLeaf2())	_prim	(node->GetPrimitive2());

	call	?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z ; ray_collider<0,0,0,0>::_prim
$LN1@stab:

; 355  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+80]
	movaps	xmm15, XMMWORD PTR [rsp+64]
	lea	r11, QWORD PTR [rsp+224]
	mov	rbx, QWORD PTR [r11+16]
	mov	rbp, QWORD PTR [r11+24]
	mov	rsi, QWORD PTR [r11+32]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rdi
	ret	0
?_stab@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXPEBVAABBNoLeafNode@Opcode@@@Z ENDP ; ray_collider<0,0,0,0>::_stab
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,1,1,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,1,1,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,1,1,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,1,1,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z PROC	; ray_collider<1,1,1,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,1,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$00$00$00@@QEAAXK@Z ENDP	; ray_collider<1,1,1,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,1,1,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,1,1,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,1,1,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,1,1,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z PROC	; ray_collider<1,1,1,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,1,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$00$00$0A@@@QEAAXK@Z ENDP	; ray_collider<1,1,1,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,1,0,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,1,0,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,1,0,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,1,0,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z PROC	; ray_collider<1,1,0,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,0,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$00$0A@$00@@QEAAXK@Z ENDP	; ray_collider<1,1,0,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,1,0,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,1,0,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,1,0,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,1,0,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z PROC	; ray_collider<1,1,0,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,1,0,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$00$0A@$0A@@@QEAAXK@Z ENDP	; ray_collider<1,1,0,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,0,1,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,0,1,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,0,1,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,0,1,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z PROC	; ray_collider<1,0,1,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,1,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$0A@$00$00@@QEAAXK@Z ENDP	; ray_collider<1,0,1,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,0,1,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,0,1,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,0,1,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,0,1,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z PROC	; ray_collider<1,0,1,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,1,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$0A@$00$0A@@@QEAAXK@Z ENDP	; ray_collider<1,0,1,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,0,0,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,0,0,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,0,0,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,0,0,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z PROC	; ray_collider<1,0,0,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,0,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$0A@$0A@$00@@QEAAXK@Z ENDP	; ray_collider<1,0,0,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<1,0,0,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<1,0,0,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<1,0,0,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$00$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<1,0,0,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z PROC	; ray_collider<1,0,0,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<1,0,0,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$00$0A@$0A@$0A@@@QEAAXK@Z ENDP	; ray_collider<1,0,0,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,1,1,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,1,1,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,1,1,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$00$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,1,1,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z PROC	; ray_collider<0,1,1,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,1,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$00$00$00@@QEAAXK@Z ENDP	; ray_collider<0,1,1,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,1,1,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,1,1,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,1,1,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$00$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,1,1,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z PROC	; ray_collider<0,1,1,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,1,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$00$00$0A@@@QEAAXK@Z ENDP	; ray_collider<0,1,1,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,1,0,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,1,0,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,1,0,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$00$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,1,0,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z PROC	; ray_collider<0,1,0,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,0,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$00$0A@$00@@QEAAXK@Z ENDP	; ray_collider<0,1,0,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,1,0,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,1,0,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,1,0,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$00$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,1,0,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z PROC	; ray_collider<0,1,0,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,1,0,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$00$0A@$0A@@@QEAAXK@Z ENDP	; ray_collider<0,1,0,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,0,1,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,0,1,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,0,1,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$0A@$00$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,0,1,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z PROC	; ray_collider<0,0,1,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,1,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$0A@$00$00@@QEAAXK@Z ENDP	; ray_collider<0,0,1,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,0,1,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,0,1,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,0,1,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$0A@$00$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,0,1,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z PROC	; ray_collider<0,0,1,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,1,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$0A@$00$0A@@@QEAAXK@Z ENDP	; ray_collider<0,0,1,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,0,0,1>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,0,0,1>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,0,0,1>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$0A@$0A@$00@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,0,0,1>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z
_TEXT	SEGMENT
v$ = 96
this$ = 96
u$ = 104
prim$ = 104
r$ = 112
?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z PROC	; ray_collider<0,0,0,1>::_prim, COMDAT

; 280  : 	{

$LN34:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,0,1>::_tri
	test	al, al
	je	$LN2@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb.h

; 154  : 		ICF int			r_count			()	{	return rd.size();			};

	mov	r8, QWORD PTR [rbx]
; File c:\program files (x86)\microsoft visual studio 12.0\vc\include\vector

; 1148 : 		return (this->_Mylast - this->_Myfirst);

	mov	rax, 5270498306774157605		; 4924924924924925H
	mov	rcx, QWORD PTR [r8+24]
	sub	rcx, QWORD PTR [r8+16]
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rdx, rax
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 287  : 			if (dest->r_count())	

	test	edx, edx
	je	$LN4@prim

; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();

	mov	r8, QWORD PTR [r8+16]

; 290  : 				if (r<R.range)	{

	movss	xmm0, DWORD PTR [r8+44]
	comiss	xmm0, xmm6
	jbe	$LN31@prim

; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 294  : 					R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [r8+44], xmm6
	mov	DWORD PTR [r8+40], esi
	movss	DWORD PTR [r8+48], xmm0
	movss	DWORD PTR [r8+52], xmm1

; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+8], eax

; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+20], eax

; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r8+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r8+32], eax

; 298  : 					R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r8+36], ecx

; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {

	jmp	$LN32@prim
$LN4@prim:

; 303  : 				RESULT& R	= dest->r_add();

	mov	rcx, r8
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add

; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 307  : 				R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	mov	r9, rax
	mov	DWORD PTR [rax+40], esi
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 311  : 				R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN32@prim:

; 312  : 				rRange		= r;

	movss	DWORD PTR [rbx+80], xmm6

; 313  : 				rRange2		= r*r;

	mulss	xmm6, xmm6
	movss	DWORD PTR [rbx+84], xmm6
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN2@prim:

; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();
; 317  : 			R.id		= prim;
; 318  : 			R.range		= r;
; 319  : 			R.u			= u;
; 320  : 			R.v			= v;
; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];
; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];
; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];
; 324  : 			R.dummy		= tris[prim].dummy;
; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$0A@$0A@$00@@QEAAXK@Z ENDP	; ray_collider<0,0,0,1>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z
_TEXT	SEGMENT
MaxT$1 = 0
this$ = 96
bCenter$ = 104
bExtents$ = 112
coord$ = 120
?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z PROC ; ray_collider<0,0,0,0>::_box_fpu, COMDAT

; 209  : 	{

$LN276:
	sub	rsp, 88					; 00000058H
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm1, DWORD PTR [rdx+4]
	movss	xmm2, DWORD PTR [rdx]
	movss	xmm0, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp+64], xmm6
	movaps	XMMWORD PTR [rsp+48], xmm7
	movaps	XMMWORD PTR [rsp+32], xmm8
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 36   : 	BOOL Inside			= TRUE;

	mov	edx, 1
	mov	eax, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [r8+4]
	movss	xmm3, DWORD PTR [r8]
	movss	xmm4, DWORD PTR [r8+8]
	movaps	xmm7, xmm1
	movaps	xmm8, xmm2
	movaps	xmm6, xmm0
	movaps	XMMWORD PTR [rsp+16], xmm9
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	movss	xmm9, DWORD PTR [rcx+32]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm8, xmm3
	subss	xmm7, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 39   : 	if(ray.pos[0] < min[0]) {

	comiss	xmm8, xmm9
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movss	xmm1, DWORD PTR __real@bf800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm6, xmm4

; 32   :     ICF SelfRef add(const Self& a, const Self& v) { x = a.x + v.x; y = a.y + v.y; z = a.z + v.z; return *this; };

	addss	xmm3, xmm2
	addss	xmm4, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 35   : 	MaxT.x=MaxT.y=MaxT.z=-1.0f;

	movaps	xmm2, xmm1
	movaps	xmm0, xmm1
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
	movss	DWORD PTR MaxT$1[rsp], xmm0
	movss	DWORD PTR MaxT$1[rsp+8], xmm1

; 39   : 	if(ray.pos[0] < min[0]) {

	jbe	SHORT $LN40@box_fpu

; 40   : 		coord[0]	= min[0];
; 41   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm8

; 42   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (min[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm8

; 43   : 	} else if(ray.pos[0] > max[0]) {

	jmp	SHORT $LN271@box_fpu
$LN40@box_fpu:
	comiss	xmm9, xmm3
	jbe	SHORT $LN36@box_fpu

; 44   : 		coord[0]	= max[0];
; 45   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9], xmm3

; 46   : 		if(uf(ray.inv_dir[0]))	MaxT[0] = (max[0] - ray.pos[0]) * ray.inv_dir[0]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+48], eax
	je	SHORT $LN36@box_fpu
	movaps	xmm0, xmm3
$LN271@box_fpu:
	subss	xmm0, DWORD PTR [rcx+32]
	mulss	xmm0, DWORD PTR [rcx+48]
	movss	DWORD PTR MaxT$1[rsp], xmm0
$LN36@box_fpu:

; 47   : 	}
; 48   : 	if(ray.pos[1] < min[1]) {

	movss	xmm9, DWORD PTR [rcx+36]
	comiss	xmm7, xmm9
	jbe	SHORT $LN35@box_fpu

; 49   : 		coord[1]	= min[1];
; 50   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm7

; 51   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (min[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm7

; 52   : 	} else if(ray.pos[1] > max[1]) {

	jmp	SHORT $LN272@box_fpu
$LN35@box_fpu:
	comiss	xmm9, xmm5
	jbe	SHORT $LN31@box_fpu

; 53   : 		coord[1]	= max[1];
; 54   : 		Inside		= FALSE;

	xor	eax, eax
	movss	DWORD PTR [r9+4], xmm5

; 55   : 		if(uf(ray.inv_dir[1]))	MaxT[1] = (max[1] - ray.pos[1]) * ray.inv_dir[1]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+52], eax
	je	SHORT $LN31@box_fpu
	movaps	xmm2, xmm5
$LN272@box_fpu:
	subss	xmm2, DWORD PTR [rcx+36]
	mulss	xmm2, DWORD PTR [rcx+52]
	movss	DWORD PTR MaxT$1[rsp+4], xmm2
$LN31@box_fpu:

; 56   : 	}
; 57   : 	if(ray.pos[2] < min[2]) {

	movss	xmm9, DWORD PTR [rcx+40]
	comiss	xmm6, xmm9
	jbe	$LN30@box_fpu

; 58   : 		coord[2]	= min[2];

	movss	DWORD PTR [r9+8], xmm6

; 59   : 		Inside		= FALSE;
; 60   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (min[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	SHORT $LN25@box_fpu
	movaps	xmm1, xmm6
$LN273@box_fpu:
	subss	xmm1, DWORD PTR [rcx+40]
	mulss	xmm1, DWORD PTR [rcx+56]
	movss	DWORD PTR MaxT$1[rsp+8], xmm1
$LN25@box_fpu:

; 71   : 	}
; 72   : 
; 73   : 	// Get largest of the maxT's for final choice of intersection
; 74   : 	u32 WhichPlane = 0;
; 75   : 	if	(MaxT[1] > MaxT[0])				WhichPlane = 1;

	xor	r8d, r8d
	comiss	xmm2, xmm0

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	mov	r10d, 2
	cmova	r8d, edx
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 76   : 	if	(MaxT[2] > MaxT[WhichPlane])	WhichPlane = 2;

	comiss	xmm1, DWORD PTR MaxT$1[rsp+rax*4]
	cmova	r8d, r10d
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 21   :     ICF T& operator[] (int i) { return *((T*)this + i); }

	movsxd	rax, r8d
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 79   : 	if(uf(MaxT[WhichPlane])&0x80000000) return false;

	test	DWORD PTR MaxT$1[rsp+rax*4], -2147483648 ; 80000000H
	jne	$LN11@box_fpu

; 80   : 
; 81   : 	if  (0==WhichPlane)	{	// 1 & 2

	test	r8d, r8d
	jne	SHORT $LN21@box_fpu

; 82   : 		coord[1] = ray.pos[1] + MaxT[0] * ray.fwd_dir[1];

	movaps	xmm3, xmm0
	mulss	xmm3, DWORD PTR [rcx+68]
	addss	xmm3, DWORD PTR [rcx+36]

; 83   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm3
	movss	DWORD PTR [r9+4], xmm3
	ja	$LN11@box_fpu
	comiss	xmm3, xmm5
	ja	$LN11@box_fpu

; 84   : 		coord[2] = ray.pos[2] + MaxT[0] * ray.fwd_dir[2];

	mulss	xmm0, DWORD PTR [rcx+72]
	addss	xmm0, DWORD PTR [rcx+40]

; 85   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm0
	movss	DWORD PTR [r9+8], xmm0
	ja	$LN11@box_fpu
	comiss	xmm0, xmm4
	jmp	$LN274@box_fpu
$LN30@box_fpu:

; 61   : 	} else if(ray.pos[2] > max[2]) {

	comiss	xmm9, xmm4
	jbe	SHORT $LN26@box_fpu

; 62   : 		coord[2]	= max[2];

	movss	DWORD PTR [r9+8], xmm4

; 63   : 		Inside		= FALSE;
; 64   : 		if(uf(ray.inv_dir[2]))	MaxT[2] = (max[2] - ray.pos[2]) * ray.inv_dir[2]; // Calculate T distances to candidate planes

	cmp	DWORD PTR [rcx+56], 0
	je	$LN25@box_fpu
	movaps	xmm1, xmm4

; 65   : 	}
; 66   : 
; 67   : 	// Ray ray.pos inside bounding box
; 68   : 	if(Inside)		{

	jmp	$LN273@box_fpu
$LN26@box_fpu:
	test	eax, eax
	je	$LN25@box_fpu

; 69   : 		coord		= ray.pos;

	movsdx	xmm0, QWORD PTR [rcx+32]
	movsdx	QWORD PTR [r9], xmm0
	mov	eax, DWORD PTR [rcx+40]
	mov	DWORD PTR [r9+8], eax

; 70   : 		return		true;

	jmp	SHORT $LN41@box_fpu
$LN21@box_fpu:

; 86   : 		return true;
; 87   : 	}
; 88   : 	if (1==WhichPlane)	{	// 0 & 2

	cmp	r8d, edx
	jne	SHORT $LN16@box_fpu

; 89   : 		coord[0] = ray.pos[0] + MaxT[1] * ray.fwd_dir[0];

	movaps	xmm0, xmm2
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 90   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 91   : 		coord[2] = ray.pos[2] + MaxT[1] * ray.fwd_dir[2];

	mulss	xmm2, DWORD PTR [rcx+72]
	addss	xmm2, DWORD PTR [rcx+40]

; 92   : 		if((coord[2] < min[2]) || (coord[2] > max[2]))	return false;

	comiss	xmm6, xmm2
	movss	DWORD PTR [r9+8], xmm2
	ja	SHORT $LN11@box_fpu
	comiss	xmm2, xmm4
	jmp	SHORT $LN274@box_fpu
$LN16@box_fpu:

; 93   : 		return true;
; 94   : 	}
; 95   : 	if (2==WhichPlane)	{	// 0 & 1

	cmp	r8d, r10d
	jne	SHORT $LN11@box_fpu

; 96   : 		coord[0] = ray.pos[0] + MaxT[2] * ray.fwd_dir[0];

	movaps	xmm0, xmm1
	mulss	xmm0, DWORD PTR [rcx+64]
	addss	xmm0, DWORD PTR [rcx+32]

; 97   : 		if((coord[0] < min[0]) || (coord[0] > max[0]))	return false;

	comiss	xmm8, xmm0
	movss	DWORD PTR [r9], xmm0
	ja	SHORT $LN11@box_fpu
	comiss	xmm0, xmm3
	ja	SHORT $LN11@box_fpu

; 98   : 		coord[1] = ray.pos[1] + MaxT[2] * ray.fwd_dir[1];

	mulss	xmm1, DWORD PTR [rcx+68]
	addss	xmm1, DWORD PTR [rcx+36]

; 99   : 		if((coord[1] < min[1]) || (coord[1] > max[1]))	return false;

	comiss	xmm7, xmm1
	movss	DWORD PTR [r9+4], xmm1
	ja	SHORT $LN11@box_fpu
	comiss	xmm1, xmm5
$LN274@box_fpu:
	jbe	SHORT $LN41@box_fpu
$LN11@box_fpu:

; 100  : 		return true;
; 101  : 	}
; 102  : 	return false;

	xor	edx, edx
$LN41@box_fpu:
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 214  : 	}

	movaps	xmm6, XMMWORD PTR [rsp+64]
	movaps	xmm7, XMMWORD PTR [rsp+48]
	movaps	xmm8, XMMWORD PTR [rsp+32]
	mov	eax, edx
	movaps	xmm9, XMMWORD PTR [rsp+16]
	add	rsp, 88					; 00000058H
	ret	0
?_box_fpu@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAU2@@Z ENDP ; ray_collider<0,0,0,0>::_box_fpu
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z
_TEXT	SEGMENT
this$ = 32
bCenter$ = 40
bExtents$ = 48
dist$ = 56
?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z PROC ; ray_collider<0,0,0,0>::_box_sse, COMDAT

; 217  : 	{

$LN6:
	sub	rsp, 24

; 218  : 		aabb_t		box;
; 219  : 	/*
; 220  : 		box.min.sub (bCenter,bExtents);	box.min.pad = 0;
; 221  : 		box.max.add	(bCenter,bExtents); box.max.pad = 0;
; 222  : 	*/
; 223  : 		__m128 CN = _mm_unpacklo_ps( _mm_load_ss( (float*) &bCenter.x ) , _mm_load_ss( (float*) &bCenter.y ) );

	movss	xmm0, DWORD PTR [rdx+4]
	movss	xmm1, DWORD PTR [rdx]

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm5, DWORD PTR [r8]
	movaps	XMMWORD PTR [rsp], xmm6
	unpcklps xmm1, xmm0
	movss	xmm0, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	edx, 1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 224  : 		CN = _mm_movelh_ps( CN , _mm_load_ss( (float*) &bCenter.z ) );

	movlhps	xmm1, xmm0

; 225  : 		__m128 EX = _mm_unpacklo_ps( _mm_load_ss( (float*) &bExtents.x ) , _mm_load_ss( (float*) &bExtents.y ) );

	movss	xmm0, DWORD PTR [r8+4]

; 226  : 		EX = _mm_movelh_ps( EX , _mm_load_ss( (float*) &bExtents.z ) );
; 227  : 
; 228  : 		_mm_store_ps( (float*) &box.min , _mm_sub_ps( CN , EX ) );

	movaps	xmm6, xmm1
	unpcklps xmm5, xmm0
	movss	xmm0, DWORD PTR [r8+8]
	movlhps	xmm5, xmm0
	subps	xmm6, xmm5

; 229  : 		_mm_store_ps( (float*) &box.max , _mm_add_ps( CN , EX ) );

	addps	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 137  : 	const __m128 l1 = mulps(subps(box_min, pos), inv_dir);

	subps	xmm6, XMMWORD PTR [rcx+32]

; 138  : 	const __m128 l2 = mulps(subps(box_max, pos), inv_dir);

	subps	xmm5, XMMWORD PTR [rcx+32]
	mulps	xmm6, XMMWORD PTR [rcx+48]
	mulps	xmm5, XMMWORD PTR [rcx+48]

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	mov	ecx, 0
	mov	eax, ecx
	movaps	xmm4, xmm6
	maxps	xmm6, XMMWORD PTR ps_cst_minus_inf
	movaps	xmm0, xmm5
	minps	xmm0, XMMWORD PTR ps_cst_plus_inf
	minps	xmm4, XMMWORD PTR ps_cst_plus_inf
	maxps	xmm5, XMMWORD PTR ps_cst_minus_inf
	maxps	xmm4, xmm0
	minps	xmm6, xmm5
	movaps	xmm1, xmm6
	movaps	xmm0, xmm4
	shufps	xmm0, xmm4, 57				; 00000039H
	shufps	xmm1, xmm6, 57				; 00000039H
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	movhlps	xmm0, xmm4
	movhlps	xmm1, xmm6
	minss	xmm4, xmm0
	maxss	xmm6, xmm1
	xorps	xmm0, xmm0
	comiss	xmm4, xmm6

; 165  : 
; 166  : 	storess		(lmin, &dist);

	movss	DWORD PTR [r9], xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	movaps	xmm6, XMMWORD PTR [rsp]
; File c:\x-ray\stcop\rgs\src\xrcdb\ispatial_q_ray.cpp

; 164  : 	const BOOL ret = _mm_comige_ss(lmax, _mm_setzero_ps()) & _mm_comige_ss(lmax,lmin);

	cmovae	eax, edx
	comiss	xmm4, xmm0
	cmovae	ecx, edx
	and	eax, ecx
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 232  : 	}

	add	rsp, 24
	ret	0
?_box_sse@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAHAEBU?$_vector3@M@@0AEAM@Z ENDP ; ray_collider<0,0,0,0>::_box_sse
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z
_TEXT	SEGMENT
u$ = 96
this$ = 96
r$ = 104
prim$ = 104
v$ = 112
?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z PROC	; ray_collider<0,0,0,0>::_prim, COMDAT

; 280  : 	{

$LN33:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 64					; 00000040H

; 281  : 		float	u,v,r;
; 282  : 		if (!_tri(tris[prim].verts, u, v, r))	return;

	mov	edi, edx
	mov	esi, edx
	mov	rdx, QWORD PTR [rcx+8]
	lea	rax, QWORD PTR r$[rsp]
	shl	rdi, 4
	lea	r9, QWORD PTR v$[rsp]
	lea	r8, QWORD PTR u$[rsp]
	add	rdx, rdi
	mov	rbx, rcx
	mov	QWORD PTR [rsp+32], rax
	call	?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z ; ray_collider<0,0,0,0>::_tri
	test	al, al
	je	$LN6@prim

; 283  : 		if (r<=0 || r>rRange)					return;

	movaps	XMMWORD PTR [rsp+48], xmm6
	movss	xmm6, DWORD PTR r$[rsp]
	xorps	xmm0, xmm0
	comiss	xmm0, xmm6
	jae	$LN31@prim
	comiss	xmm6, DWORD PTR [rbx+80]
	ja	$LN31@prim

; 284  : 		
; 285  : 		if (bNearest)	
; 286  : 		{
; 287  : 			if (dest->r_count())	
; 288  : 			{
; 289  : 				RESULT& R = *dest->r_begin();
; 290  : 				if (r<R.range)	{
; 291  : 					R.id		= prim;
; 292  : 					R.range		= r;
; 293  : 					R.u			= u;
; 294  : 					R.v			= v;
; 295  : 					R.verts	[0]	= verts[tris[prim].verts[0]];
; 296  : 					R.verts	[1]	= verts[tris[prim].verts[1]];
; 297  : 					R.verts	[2]	= verts[tris[prim].verts[2]];
; 298  : 					R.dummy		= tris[prim].dummy;
; 299  : 					rRange		= r;
; 300  : 					rRange2		= r*r;
; 301  : 				}
; 302  : 			} else {
; 303  : 				RESULT& R	= dest->r_add();
; 304  : 				R.id		= prim;
; 305  : 				R.range		= r;
; 306  : 				R.u			= u;
; 307  : 				R.v			= v;
; 308  : 				R.verts	[0]	= verts[tris[prim].verts[0]];
; 309  : 				R.verts	[1]	= verts[tris[prim].verts[1]];
; 310  : 				R.verts	[2]	= verts[tris[prim].verts[2]];
; 311  : 				R.dummy		= tris[prim].dummy;
; 312  : 				rRange		= r;
; 313  : 				rRange2		= r*r;
; 314  : 			}
; 315  : 		} else {
; 316  : 			RESULT& R	= dest->r_add();

	mov	rcx, QWORD PTR [rbx]
	call	?r_add@COLLIDER@CDB@@QEAAAEAURESULT@2@XZ ; CDB::COLLIDER::r_add
	mov	r9, rax

; 317  : 			R.id		= prim;

	mov	DWORD PTR [rax+40], esi

; 318  : 			R.range		= r;
; 319  : 			R.u			= u;

	movss	xmm0, DWORD PTR u$[rsp]

; 320  : 			R.v			= v;

	movss	xmm1, DWORD PTR v$[rsp]
	movss	DWORD PTR [rax+44], xmm6
	movss	DWORD PTR [rax+48], xmm0
	movss	DWORD PTR [rax+52], xmm1

; 321  : 			R.verts	[0]	= verts[tris[prim].verts[0]];

	mov	rcx, QWORD PTR [rbx+8]
	mov	edx, DWORD PTR [rcx+rdi]
	mov	rcx, QWORD PTR [rbx+16]
	lea	r8, QWORD PTR [rdx+rdx*2]
	movsdx	xmm0, QWORD PTR [rcx+r8*4]
	movsdx	QWORD PTR [rax], xmm0
	mov	eax, DWORD PTR [rcx+r8*4+8]
	mov	DWORD PTR [r9+8], eax

; 322  : 			R.verts	[1]	= verts[tris[prim].verts[1]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+4]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+12], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+20], eax

; 323  : 			R.verts	[2]	= verts[tris[prim].verts[2]];

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+8]
	mov	rax, QWORD PTR [rbx+16]
	lea	rdx, QWORD PTR [rcx+rcx*2]
	movsdx	xmm0, QWORD PTR [rax+rdx*4]
	movsdx	QWORD PTR [r9+24], xmm0
	mov	eax, DWORD PTR [rax+rdx*4+8]
	mov	DWORD PTR [r9+32], eax

; 324  : 			R.dummy		= tris[prim].dummy;

	mov	rax, QWORD PTR [rbx+8]
	mov	ecx, DWORD PTR [rax+rdi+12]
	mov	DWORD PTR [r9+36], ecx
$LN31@prim:
	movaps	xmm6, XMMWORD PTR [rsp+48]
$LN6@prim:

; 325  : 		}
; 326  : 	}

	add	rsp, 64					; 00000040H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
?_prim@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAAXK@Z ENDP	; ray_collider<0,0,0,0>::_prim
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,1,1,1>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$00$00$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,1,1,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,1,1,0>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$00$00$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,1,1,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,1,0,1>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$00$0A@$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,1,0,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,1,0,0>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,1,0,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,0,1,1>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$0A@$00$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,0,1,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,0,1,0>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,0,1,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,0,0,1>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,0,0,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<1,0,0,0>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$00$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<1,0,0,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,1,1,1>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$00$00$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,1,1,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,1,1,0>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$00$00$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,1,1,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,1,0,1>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$00$0A@$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,1,0,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
this$ = 176
p$ = 184
u$ = 192
v$ = 200
range$ = 208
?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,1,0,0>::_tri, COMDAT

; 235  : 	{

$LN44:
	mov	rax, rsp
	push	rbx
	sub	rsp, 160				; 000000a0H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-40], xmm7
	movaps	XMMWORD PTR [rax-56], xmm8

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm8, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm9
	movaps	XMMWORD PTR [rax-88], xmm10
	movaps	XMMWORD PTR [rax-104], xmm11
	movaps	XMMWORD PTR [rax-120], xmm12

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm12, xmm1
	movaps	XMMWORD PTR [rsp+32], xmm13
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm0, xmm6
	movaps	XMMWORD PTR [rsp+16], xmm14
	movaps	XMMWORD PTR [rsp], xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm3, DWORD PTR [rbx+r11*4+4]
	movss	xmm2, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm9, DWORD PTR [rbx+r10*4]
	movss	xmm10, DWORD PTR [rbx+r10*4+4]
	movss	xmm11, DWORD PTR [rbx+r10*4+8]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+8]
	subss	xmm14, xmm3

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm12, xmm15
	subss	xmm12, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm2
	subss	xmm9, xmm2

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm8

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm8, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm8, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm12
	mulss	xmm0, xmm9
	movaps	xmm7, xmm6
	movaps	xmm1, xmm8
	mulss	xmm7, xmm10
	mulss	xmm1, xmm11
	addss	xmm7, xmm0
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	movss	xmm0, DWORD PTR __real@3727c5ac
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm7, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 251  : 			if (det < EPS)  return false;

	comiss	xmm0, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rcx+32]
	movss	xmm4, DWORD PTR [rcx+36]
	subss	xmm4, xmm3
	subss	xmm5, xmm2
	movss	xmm2, DWORD PTR [rcx+40]

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm3, xmm4
	movaps	xmm0, xmm5
	mulss	xmm3, xmm6
	mulss	xmm0, xmm12

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm3, xmm0
	movaps	xmm1, xmm2
	mulss	xmm1, xmm8
	xorps	xmm8, xmm8
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 254  : 			if (u < 0.f || u > det) return false;

	comiss	xmm8, xmm3
	movss	DWORD PTR [r8], xmm3
	ja	$LN9@tri
	comiss	xmm3, xmm7
	ja	$LN9@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm4

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm4, xmm9
	movaps	xmm0, xmm2
	mulss	xmm0, xmm10
	mulss	xmm6, xmm11
	mulss	xmm2, xmm9
	subss	xmm6, xmm0
	movaps	xmm0, xmm5
	mulss	xmm0, xmm11
	mulss	xmm5, xmm10
	subss	xmm5, xmm4
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm4, xmm2
	movaps	xmm1, xmm5
	mulss	xmm4, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm4, xmm0
	addss	xmm4, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 257  : 			if (v < 0.f || u + v > det) return false;

	comiss	xmm8, xmm4
	movss	DWORD PTR [r9], xmm4
	ja	SHORT $LN9@tri
	movaps	xmm0, xmm4
	addss	xmm0, xmm3
	comiss	xmm0, xmm7
	ja	SHORT $LN9@tri

; 260  : 			range	*= inv_det;

	mov	rax, QWORD PTR range$[rsp]
	movss	xmm0, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 259  : 			inv_det = 1.0f / det;

	divss	xmm0, xmm7
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm6, xmm13
	mulss	xmm5, xmm15
	addss	xmm2, xmm6
	addss	xmm2, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 260  : 			range	*= inv_det;

	mulss	xmm2, xmm0

; 261  : 			u		*= inv_det;

	mulss	xmm3, xmm0

; 262  : 			v		*= inv_det;

	mulss	xmm4, xmm0
	movss	DWORD PTR [rax], xmm2
	movss	DWORD PTR [r8], xmm3
	movss	DWORD PTR [r9], xmm4

; 263  : 		}
; 264  : 		else
; 265  : 		{			
; 266  : 			if (det > -EPS && det < EPS) return false;
; 267  : 			inv_det = 1.0f / det;
; 268  : 			tvec.sub(ray.pos, p0);						// calculate distance from vert0 to ray origin
; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds
; 270  : 			if (u < 0.0f || u > 1.0f)    return false;
; 271  : 			qvec.crossproduct(tvec, edge1);				// prepare to test V parameter
; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds
; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;
; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle
; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN13@tri
$LN9@tri:

; 254  : 			if (u < 0.f || u > det) return false;

	xor	al, al
$LN13@tri:

; 277  : 	}

	movaps	xmm14, XMMWORD PTR [rsp+16]
	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+160]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm7, XMMWORD PTR [r11-32]
	movaps	xmm8, XMMWORD PTR [r11-48]
	movaps	xmm9, XMMWORD PTR [r11-64]
	movaps	xmm10, XMMWORD PTR [r11-80]
	movaps	xmm11, XMMWORD PTR [r11-96]
	movaps	xmm12, XMMWORD PTR [r11-112]
	movaps	xmm13, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$00$0A@$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,1,0,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,0,1,1>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$0A@$00$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,0,1,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,0,1,0>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$0A@$00$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,0,1,0>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,0,0,1>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$0A@$0A@$00@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,0,0,1>::_tri
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp
;	COMDAT ?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z
_TEXT	SEGMENT
pvec$1$ = 160
this$ = 160
p$ = 168
u$ = 176
v$ = 184
range$ = 192
?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z PROC ; ray_collider<0,0,0,0>::_tri, COMDAT

; 235  : 	{

$LN45:
	mov	rax, rsp
	push	rbx
	sub	rsp, 144				; 00000090H

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	rbx, QWORD PTR [rcx+16]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	xmm1, DWORD PTR [rcx+68]
	movaps	XMMWORD PTR [rax-24], xmm6
	movss	xmm6, DWORD PTR [rcx+72]
	movaps	XMMWORD PTR [rax-56], xmm9

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movss	xmm9, DWORD PTR [rcx+64]
	movaps	XMMWORD PTR [rax-72], xmm10
	movaps	XMMWORD PTR [rax-88], xmm11
	movaps	XMMWORD PTR [rax-104], xmm12
	movaps	XMMWORD PTR [rax-120], xmm13

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm3, xmm1
	movaps	xmm0, xmm6
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 240  : 		Fvector&			p0	= verts[ p[0] ];

	mov	eax, DWORD PTR [rdx]
	lea	r11, QWORD PTR [rax+rax*2]

; 241  : 		Fvector&			p1	= verts[ p[1] ];

	mov	eax, DWORD PTR [rdx+4]
	movaps	XMMWORD PTR [rsp+16], xmm14
	lea	r10, QWORD PTR [rax+rax*2]

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	mov	eax, DWORD PTR [rdx+8]
	movaps	XMMWORD PTR [rsp], xmm15
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm5, DWORD PTR [rbx+r11*4]
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 242  : 		Fvector&			p2	= verts[ p[2] ];

	lea	rdx, QWORD PTR [rax+rax*2]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm11, DWORD PTR [rbx+r10*4+4]
	movss	xmm10, DWORD PTR [rbx+r10*4]
	movss	xmm12, DWORD PTR [rbx+r10*4+8]
	movss	xmm14, DWORD PTR [rbx+rdx*4+4]
	movss	xmm15, DWORD PTR [rbx+rdx*4+8]
	movss	xmm13, DWORD PTR [rbx+rdx*4]
	subss	xmm14, DWORD PTR [rbx+r11*4+4]
	subss	xmm15, DWORD PTR [rbx+r11*4+8]
	subss	xmm11, DWORD PTR [rbx+r11*4+4]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	mulss	xmm0, xmm14
	mulss	xmm3, xmm15

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm12, DWORD PTR [rbx+r11*4+8]

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	subss	xmm3, xmm0

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm13, xmm5

; 283  :         y = v1.z * v2.x - v1.x * v2.z;

	movaps	xmm0, xmm9

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm9, xmm14
	mulss	xmm0, xmm15
	mulss	xmm1, xmm13
	mulss	xmm6, xmm13
	subss	xmm6, xmm0
	subss	xmm9, xmm1

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm10, xmm5

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm3
	movaps	xmm2, xmm6
	mulss	xmm0, xmm10
	movaps	xmm1, xmm9
	mulss	xmm2, xmm11
	mulss	xmm1, xmm12
	addss	xmm2, xmm0

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movss	DWORD PTR pvec$1$[rsp], xmm3

; 276  :         return x*v.x + y*v.y + z*v.z;

	addss	xmm2, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 266  : 			if (det > -EPS && det < EPS) return false;

	comiss	xmm2, DWORD PTR __real@b727c5ac
	jbe	SHORT $LN5@tri
	movss	xmm0, DWORD PTR __real@3727c5ac
	comiss	xmm0, xmm2
	jbe	SHORT $LN5@tri
	xor	al, al
	jmp	$LN13@tri
$LN5@tri:
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm4, DWORD PTR [rcx+32]
	movss	xmm3, DWORD PTR [rcx+36]
	movaps	XMMWORD PTR [rsp+112], xmm7
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	movss	xmm7, DWORD PTR __real@3f800000
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	subss	xmm3, DWORD PTR [rbx+r11*4+4]
	subss	xmm4, xmm5
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 267  : 			inv_det = 1.0f / det;

	divss	xmm7, xmm2
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm4
	movaps	xmm5, xmm3

; 37   :     ICF SelfRef sub(const Self& a, const Self& v) { x = a.x - v.x; y = a.y - v.y; z = a.z - v.z; return *this; };

	movss	xmm2, DWORD PTR [rcx+40]
	subss	xmm2, DWORD PTR [rbx+r11*4+8]

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm0, DWORD PTR pvec$1$[rsp]
	mulss	xmm5, xmm6
	movaps	xmm1, xmm2
	addss	xmm5, xmm0
	mulss	xmm1, xmm9
	xorps	xmm9, xmm9
	addss	xmm5, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 269  : 			u = tvec.dotproduct(pvec)*inv_det;			// calculate U parameter and test bounds

	mulss	xmm5, xmm7

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	comiss	xmm9, xmm5
	movss	DWORD PTR [r8], xmm5
	ja	$LN3@tri
	comiss	xmm5, DWORD PTR __real@3f800000
	ja	$LN3@tri
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 282  :         x = v1.y * v2.z - v1.z * v2.y;

	movaps	xmm6, xmm3

; 284  :         z = v1.x * v2.y - v1.y * v2.x;

	mulss	xmm3, xmm10
	movaps	xmm0, xmm2
	mulss	xmm0, xmm11
	mulss	xmm6, xmm12
	mulss	xmm2, xmm10
	subss	xmm6, xmm0
	movaps	xmm0, xmm4
	mulss	xmm0, xmm12
	mulss	xmm4, xmm11
	subss	xmm4, xmm3
	subss	xmm2, xmm0

; 276  :         return x*v.x + y*v.y + z*v.z;

	movaps	xmm0, xmm6
	mulss	xmm0, DWORD PTR [rcx+64]
	movaps	xmm3, xmm2
	movaps	xmm1, xmm4
	mulss	xmm3, DWORD PTR [rcx+68]
	mulss	xmm1, DWORD PTR [rcx+72]
	addss	xmm3, xmm0
	addss	xmm3, xmm1
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 272  : 			v = ray.fwd_dir.dotproduct(qvec)*inv_det;	// calculate V parameter and test bounds

	mulss	xmm3, xmm7

; 273  : 			if (v < 0.0f || u + v > 1.0f) return false;

	comiss	xmm9, xmm3
	movss	DWORD PTR [r9], xmm3
	ja	SHORT $LN3@tri
	addss	xmm3, xmm5
	comiss	xmm3, DWORD PTR __real@3f800000
	ja	SHORT $LN3@tri

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mov	rax, QWORD PTR range$[rsp]
; File c:\x-ray\stcop\rgs\src\xrcore\_vector3d.h

; 276  :         return x*v.x + y*v.y + z*v.z;

	mulss	xmm2, xmm14
	mulss	xmm6, xmm13
	addss	xmm2, xmm6
	mulss	xmm4, xmm15
	addss	xmm2, xmm4
; File c:\x-ray\stcop\rgs\src\xrcdb\xrcdb_ray.cpp

; 274  : 			range = edge2.dotproduct(qvec)*inv_det;		// calculate t, ray intersects triangle

	mulss	xmm2, xmm7
	movss	DWORD PTR [rax], xmm2

; 275  : 		}
; 276  : 		return true;

	mov	al, 1
	jmp	SHORT $LN43@tri
$LN3@tri:

; 270  : 			if (u < 0.0f || u > 1.0f)    return false;

	xor	al, al
$LN43@tri:
	movaps	xmm7, XMMWORD PTR [rsp+112]
$LN13@tri:

; 277  : 	}

	movaps	xmm15, XMMWORD PTR [rsp]
	lea	r11, QWORD PTR [rsp+144]
	movaps	xmm6, XMMWORD PTR [r11-16]
	movaps	xmm9, XMMWORD PTR [r11-48]
	movaps	xmm10, XMMWORD PTR [r11-64]
	movaps	xmm11, XMMWORD PTR [r11-80]
	movaps	xmm12, XMMWORD PTR [r11-96]
	movaps	xmm13, XMMWORD PTR [r11-112]
	movaps	xmm14, XMMWORD PTR [r11-128]
	mov	rsp, r11
	pop	rbx
	ret	0
?_tri@?$ray_collider@$0A@$0A@$0A@$0A@@@QEAA_NPEAIAEAM11@Z ENDP ; ray_collider<0,0,0,0>::_tri
_TEXT	ENDS
END
